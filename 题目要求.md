### 一、文件与邮箱处理任务要求

文件操作：使用os模块完成文件操作，文件存在则进行替换。

1. 依据函数参数`dir_name`（目录名称）创建目录。
2. 按照参数`file_path`指定的文件路径，以 utf-8 编码读取文件。
3. 提取文件中的邮箱，可使用提供的正则表达式。
4. 对提取出的邮箱进行去重处理。
5. 在`dir_name`对应的目录下，创建新文件`data.txt`。
6. 将去重后的邮箱地址写入`data.txt`，要求一行存储一个邮箱。
7. 关闭文件，并返回布尔变量`true`。
8. 若过程中出现任何错误，需捕获错误并返回`false`。

### 二、Book 类设计任务要求

#### （一）类属性

类属性需验证是否符合要求，若存在异常则抛出`BookError`，各属性要求如下：

- `book_id`（书籍 ID，字符串）：需为 13 位纯数字的字符串，且不为空。
- `name`（书名，字符串）：需为字符串类型，不为空，且要去除首尾空格。
- `author`（作者，字符串）：可为空（None）。
- `price`（价格，浮点数）：需大于 0，且不为空。
- `year`（出版年份，整数）：可为空（None）。

#### （二）类方法

1. `__init__()`：用于初始化 Book 类的所有属性。
2. `get_info()`：返回书籍的详细信息，格式为 “《{书名}》-{作者}-{出版年份}-{价格} 元”；若某字段为空，则该字段不显示，例如 “《Python 编程》- 张三 - 59.9 元”“《Python 编程》-2020-59.9 元”。
3. `discount(rate)`：根据折扣率（如 0.8 表示 8 折）计算折扣后的价格，返回浮点数；若折扣率不满足`0 < rate ≤1`，则返回原价格。
4. `to_dict()`：将 Book 类对象转换为字典，方便存储，为空（None）的值不添加对应的键。
5. 实现`__lt__`等魔法方法，根据`sort_by`类属性，支持按`book_id`和`price`对 Book 类对象进行排序。